{
  "id": "summarize_grounded",
  "version": "1.0.0",
  "purpose": "Summarize with timestamped citations",
  "inputs": [
    "mode",
    "transcript_text"
  ],
  "system": "Summarize only what appears in the source. Each item must include a timestamp citation.",
  "user": "Mode: {mode}. Source is a transcript with timestamps.\nOutput JSON: { \"mode\":\"{mode}\", \"items\":[{\"text\":\"\", \"source_refs\":[\"00:13:22-00:13:45\"]}], \"actions\":[{\"owner\":\"\", \"due\":\"YYYY-MM-DD\", \"text\":\"\", \"source_refs\":[\"...\"]}] }\nSource:\n{transcript_text}",
  "output_schema": {
    "type": "object",
    "properties": {
      "mode": {
        "type": "string"
      },
      "items": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "text": {
              "type": "string"
            },
            "source_refs": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "text",
            "source_refs"
          ]
        }
      },
      "actions": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "owner": {
              "type": "string"
            },
            "due": {
              "type": "string"
            },
            "text": {
              "type": "string"
            },
            "source_refs": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "text",
            "source_refs"
          ]
        }
      }
    },
    "required": [
      "mode",
      "items"
    ]
  }
}